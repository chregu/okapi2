services:
  routingcontainer:
    class:    api_routingcontainer
    arguments: [@routing]
    shared:   false
  routing:
    class:    api_routing
    shared:   true
  request:
    class:    api_request
    arguments: [@config]
    shared:   true
  response:
    class:    api_response
    shared:   true
  response_exception:
    class:    api_response_exception
    arguments: [@api_views_default]
    shared:   true
  response_withview:
    class:    api_response_withview
    arguments: [@api_views_default]
    shared:   true
  config:
    class:    api_config
    shared:   true
  log:
    class:    api_log
    arguments: [@config]
    shared:   true
  i18n:
    class:    api_i18n_dispatcher
    arguments: [@config]
    shared:   true
  db:
    class:    XXX
    arguments:
      dsn:
        host: localhost
        username: root
        password:
        dbname: XXX
    shared:   true
  auth:
    class:    api_pam_auth_XXX
    arguments:
        opts:
          class: XXX
        config: @config
        request: @request
        db: @db
    shared:   true
  perm:
    class:    api_pam_perm_XXX
    arguments:
        opts:
          class: crud
        config: @config
        response: @response
    shared:   true
  pam:
    class:    api_pam
    arguments: [@config, @auth, @perm]
    shared:   true
  controller:
    class:    api_controller
    arguments:
      request: @request
      routing: @routing
      config: @config
      filters:
        request:
          api_filter_hellocheck: ~
          controller: ~
          api_filter_directresponse: ~
        response:
          api_filter_replace: ~
          api_filter_tidy: ~
    shared:   true
  route:
    class:    api_routing_route
    shared:   true
  html:
    class:    api_views_html
    arguments: [@route, @request, @response]
    shared:   false
  json:
    class:    api_views_json 
    arguments: [@route, @request, @response]
    shared:   false
  api_views_default:
    class:    api_views_default
    arguments: [@route, @request, @response, @config, @i18n]
    shared:   true
  api_command_default:
    class:    api_command_default
    arguments: [@route, @request, @response, @config]
    shared:   true
  api_filter_hellocheck:
    class: api_filter_hellocheck
  api_filter_replace:
    class: api_filter_replace
  api_filter_tidy:
    class: api_filter_tidy    
  api_filter_directresponse:
    class: api_filter_directresponse
    arguments: [@response_withview,@route]